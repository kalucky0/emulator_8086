(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{YD:()=>x,yt:()=>C,Kz:()=>k});var e=function(t){return document.querySelector(t)},r=function(t){return document.querySelectorAll(t)};Number.prototype.toHex=function(){return this.toString(16)};var n=/[^0-9]+/g,a=/[^0-9a-fA-F]+/g,i="0000",l={"0000":"00"},o={"0000":"00"},c=function(t){return t=t.toLowerCase(),null==o[t]&&(o[t]="00"),o[t]},u=function(t){return null==x[t]?null:"x"==t[1]||"p"==t[1]||"i"==t[1]?4:2},s=function(t,e){var r="",i=u(t);if(null===i)return null;if("h"!=e[e.length-1]&&"H"!=e[e.length-1]){if(n.test(e))return"Incorrect value";r=(e=parseInt(e)).toHex()}else if(r=e.slice(0,-1),a.test(r))return"Incorrect value";return r=(r=r.padStart(i,"0")).toUpperCase(),console.log(t,r),4==i&&r.length>4||2==i&&r.length>2?"Out of register bounds or incorrect argument":(2==i&&(x[t].value=r),4==i&&("x"==t[1]?(x[t[0].concat("h")].value=r.slice(0,2),x[t[0].concat("l")].value=r.substring(2,4)):x[t].value=r),null)},p=function(t){var e=t.toLowerCase().split(/(?<=^\S+)\s/);if(!e[1])return"no arguments given";e[1]=e[1].replace(/\s+/g,"");var r=e[1].split(",");switch(e[0]){case"mov":case"xchg":return;case"push":return function(t){var e,r,l=u(t);if(null==l)r=t;else{if(l<4)return"wrong register: "+t;r=(r=null!==(e=function(t){if(null==x[t])return null;if("x"==t[1]){var e=x[t[0].concat("h")].value,r=x[t[0].concat("l")].value;return e=e.padStart(2,"0"),r=r.padStart(2,"0"),e.concat(r).concat("h")}return 2==u(t)?x[t].value.padStart(2,"0").concat("h"):4==u(t)?x[t].value.padStart(4,"0").concat("h"):null}(t))&&void 0!==e?e:"").toLowerCase()}var c=function(t,e){var r="";if(t=t.substring(t.length-4).toLowerCase(),"h"!=e[e.length-1]&&"H"!=e[e.length-1]){if(n.test(e))return"Argument is incorrect value";r=(e=parseInt(e)).toHex()}else if(r=e.slice(0,-1),a.test(r))return"Argument is incorrect value";return(r=r.toUpperCase()).length<=2?(r=r.padStart(2,"0"),o[t]=r):r.length>2&&((r=r.padStart(4,"0")).length>4&&(r=r.substring(r.length-4)),o[(parseInt(t,16)+1).toHex().padStart(4,"0")]=r.slice(0,2),o[t]=r.substring(2,4)),!1}(x.sp.value,r);if(c)return c;var p=parseInt(x.sp.value,16)+2;if(s("sp",p),c)return c;k(i,o)}(r[0]);case"pop":return function(t){var e=u(t);if(null==e||e<4)return"incorrect register: "+t;var r=parseInt(x.sp.value,16)-2;if(r<0)return"empty stack";var n=s("sp",r);if(n)return n;k(i,o);var a=x.sp.value,l="".concat(c((parseInt(a,16)+1).toHex().padStart(4,"0"))).concat(c(a));return l=l.toLowerCase(),s(t,l+"h")}(r[0]);default:return"wrong instruction"}},f=(e("#memAddress"),e("#stackAddress"),r("#memory .input")),h=r("#stack .input"),v=r(".mem-name"),d=r(".stack-name"),g=e("#cmd"),m=e("#execBtn"),b=e("#randomBtn"),S=e("#resetRegBtn"),L=e("#resetDataBtn"),w=e("#resetStackBtn"),x=(r(".reg-val input"),{ah:e("#ah"),al:e("#al"),bh:e("#bh"),bl:e("#bl"),ch:e("#ch"),cl:e("#cl"),dh:e("#dh"),dl:e("#dl"),ax:e("#al"),bx:e("#bl"),cx:e("#cl"),dx:e("#dl"),bp:e("#bp"),si:e("#si"),di:e("#di"),sp:e("#sp"),disp:e("#disp")});b.onclick=function(){return function(){for(var t in x)if("sp"!=t&&"h"!=t[1]&&"l"!=t[1]){var e=(r=0,65535,r=Math.ceil(r),Math.floor(Math.random()*(Math.floor(65535)-r))+r);s(t,e)}var r}()},S.onclick=function(){return function(){for(var t in x)"sp"!=t&&"h"!=t[1]&&"l"!=t[1]&&s(t,0)}()},L.onclick=function(){return function(){for(var t in l)l[t]="00";C("0000",l)}()},w.onclick=function(){return function(){for(var t in o)o[t]="00";s("sp",0),k(i="0000",o)}()},m.onclick=function(){var t=p(g.value);t&&alert(t)};var C=function(t,e){t=t.toLowerCase();var r=[];v.forEach((function(e,n){r[n]=0==n?t.slice(0,-1)+"0":(parseInt(r[n-1],16)+16).toString(16).padStart(4,"0"),e.innerHTML=r[n].length>4?"":r[n]})),f.forEach((function(n){var a=n,i="";"a"==a.id[1]?i=r[0]:"b"==a.id[1]?i=r[1]:"c"==a.id[1]?i=r[2]:"d"==a.id[1]&&(i=r[3]);var l=(i.slice(0,-1)+a.id[0]).toLowerCase();l.length>4?a.value="":(null==e[l]&&(e[l]="00"),a.value=e[l].toUpperCase(),t==l?a.classList.add("highlight"):a.classList.remove("highlight"),a.parentElement.id=l)}))},k=function(t,e){t=t.toLowerCase();var r=[];d.forEach((function(e,n){r[n]=0==n?t.slice(0,-1)+"0":(parseInt(r[n-1],16)+16).toString(16).padStart(4,"0"),e.innerHTML=r[n].length>4?"":r[n]})),h.forEach((function(t){var n=t,a="";"a"==n.id[2]?a=r[0]:"b"==n.id[2]?a=r[1]:"c"==n.id[2]?a=r[2]:"d"==n.id[2]&&(a=r[3]);var i=(a.slice(0,-1)+n.id[1]).toLowerCase();i.length>4?n.value="":(null==e[i]&&(e[i]="00"),n.value=e[i].toUpperCase(),n.parentElement.id="s"+i,x.sp.value.toLowerCase()==i?n.classList.add("highlight"):n.classList.remove("highlight"))}))}})();